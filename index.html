<script>
const weekdays = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];

// ã‚¼ãƒ­åŸ‹ã‚ï¼ˆpadStartä»£æ›¿ï¼‰
function z(n) {
  return n < 10 ? "0" + n : n;
}

function updateClock() {
  var now = new Date();
  var h = z(now.getHours());
  var m = z(now.getMinutes());
  var s = z(now.getSeconds());

  document.getElementById("time").innerHTML = h + ":" + m + ":" + s;
  document.getElementById("date").innerHTML =
    now.getFullYear() + "." + (now.getMonth()+1) + "." + now.getDate() +
    "  " + weekdays[now.getDay()];
}
setInterval(updateClock, 1000);
updateClock();

/* å¤©æ°—ã‚³ãƒ¼ãƒ‰ â†’ ã‚¢ã‚¤ã‚³ãƒ³ */
function weatherIcon(code) {
  if (code === 0) return "â˜€ï¸";
  if (code <= 2) return "â›…";
  if (code <= 3) return "â˜ï¸";
  if (code <= 48) return "ğŸŒ«ï¸";
  if (code <= 67) return "ğŸŒ§ï¸";
  if (code <= 77) return "ğŸŒ¨ï¸";
  if (code <= 82) return "ğŸŒ¦ï¸";
  if (code <= 99) return "â›ˆï¸";
  return "â“";
}

/* XMLHttpRequestç‰ˆ å¤©æ°—å–å¾— */
var xhr = new XMLHttpRequest();
xhr.open(
  "GET",
  "https://api.open-meteo.com/v1/forecast?latitude=35.636&longitude=140.091&current_weather=true&hourly=relativehumidity_2m",
  true
);

xhr.onreadystatechange = function () {
  if (xhr.readyState === 4 && xhr.status === 200) {
    var data = JSON.parse(xhr.responseText);

    document.getElementById("icon").innerHTML =
      weatherIcon(data.current_weather.weathercode);

    document.getElementById("temp").innerHTML =
      data.current_weather.temperature + "Â°C";

    document.getElementById("humidity").innerHTML =
      data.hourly.relativehumidity_2m[0] + "%";

    document.getElementById("wind").innerHTML =
      data.current_weather.windspeed + " m/s";
  }
};

xhr.send();
</script>
